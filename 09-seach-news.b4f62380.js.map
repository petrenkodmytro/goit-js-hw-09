{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SACA,MAAMC,EAAeC,SAASC,cAAc,kBACtCC,EAAYF,SAASC,cAAc,eACnCE,EAAiBH,SAASC,cAAc,sBAE9C,IAAIG,EAAa,GACbC,EAAa,EAEjBN,EAAaO,iBAAiB,UAIV,SAACC,GACnBA,EAAEC,iBAEFL,EAAeM,UAAY,GAC3BL,EAAaG,EAAEG,cAAcC,SAASC,KAAKC,MAAMC,OACjDT,EAAa,EAEbU,EAAUX,EAAYC,GACnBW,MAAK,EAACC,WAAEA,EAAUJ,MAAEA,MACnB,GAAqB,IAAjBA,EAAMK,OACR,MAAM,IAAIC,MAAM,WAElBC,EAAeP,GACfR,GAAc,EACdgB,QAAQC,IAAIjB,EAAW,IAGxBkB,OAAMC,IACLrB,EAAeM,UAAY,GAC3BgB,EAAA5B,GAAS6B,OAAOC,QAAQ,eAAgB,qBAAsB,MAC9DN,QAAQG,MAAMA,EAAM,G,IAvB1BtB,EAAUI,iBAAiB,SA+BJ,SAAEsB,GACvBb,EAAUX,EAAYC,GACnBW,MAAK,EAACC,WAAEA,EAAUJ,MAAEA,MACnB,GAAqB,IAAjBA,EAAMK,OACR,MAAM,IAAIC,MAAM,WAElBC,EAAeP,GACfR,GAAc,EACdgB,QAAQC,IAAIjB,EAAW,IAExBkB,OAAMC,IACLrB,EAAeM,UAAY,GAC3BgB,EAAA5B,GAAS6B,OAAOC,QAAQ,eAAgB,kBAAmB,MAC3DN,QAAQG,MAAMA,EAAM,G,IAKc,MAAlCK,EAAU,CACdC,OAAQ,MACRC,QAAS,CACP,iBAAkB,qDAClB,kBAAmB,oDAIvB,SAAShB,EAAUiB,EAAOC,GACxB,OAAOC,MACL,sFAAsFF,gBAAoBC,gCAC1GJ,GACAb,MAAKmB,IACL,IAAKA,EAASC,GACZ,MAAM,IAAIjB,MAAMgB,EAASE,QAE3B,OAAOF,EAASG,MAAM,G,CAgB1B,SAASlB,EAAemB,GACtB,MAAMC,EAAiBD,EAAUE,QAAO,CAACC,EAAKC,IAZzB,UAAHC,MAAEA,EAAKC,SAAEA,EAAQC,YAAEA,EAAWC,IAAEA,EAAGC,MAAEA,IACvD,MAAO,+DACyBA,EAAMD,mDACNH,4CACCC,EAASI,MAAQ,kDACpBH,8CACMC,4B,CAO3BG,CAAWP,GAAWD,GAC5B,IACHvC,EAAegD,mBAAmB,YAAaX,E","sources":["src/js/09-seach-news.js"],"sourcesContent":["import Notiflix from 'notiflix';\nconst seachFormRef = document.querySelector('.js-seach-form');\nconst seachMore = document.querySelector('.seach-more');\nconst newsWrapperRef = document.querySelector('.js-news-container');\n\nlet seachValue = '';\nlet pageNumber = 1;\n\nseachFormRef.addEventListener('submit', onSeachNews);\nseachMore.addEventListener('click', onSeachMoreNews);\n\n// функция первого поиска\nfunction onSeachNews(e) {\n  e.preventDefault();\n\n  newsWrapperRef.innerHTML = '';\n  seachValue = e.currentTarget.elements.news.value.trim();\n  pageNumber = 1;\n\n  fetchData(seachValue, pageNumber)\n    .then(({ totalCount, value }) => {\n      if (value.length === 0) {\n        throw new Error('No data');\n      }\n      renderNewsCard(value);\n      pageNumber += 1;\n      console.log(pageNumber);\n      // console.log(articles);\n    })\n    .catch(error => {\n      newsWrapperRef.innerHTML = '';\n      Notiflix.Report.failure('Attention!!!', 'Not found anything', 'Ok');\n      console.error(error);\n    });\n  // .finally(() => {\n  //   seachFormRef.reset();\n  // });\n}\n\n// функция следующего поиска\nfunction onSeachMoreNews(params) {\n  fetchData(seachValue, pageNumber)\n    .then(({ totalCount, value }) => {\n      if (value.length === 0) {\n        throw new Error('No data');\n      }\n      renderNewsCard(value);\n      pageNumber += 1;\n      console.log(pageNumber);\n    })\n    .catch(error => {\n      newsWrapperRef.innerHTML = '';\n      Notiflix.Report.failure('Attention!!!', 'Something wrong', 'Ok');\n      console.error(error);\n    });\n}\n\n// функция принесла и распарсила промис с данными\nconst options = {\n  method: 'GET',\n  headers: {\n    'X-RapidAPI-Key': '504d5aef12msh28872f0ea14deb5p1f3bbcjsnd108e0bdaaa0',\n    'X-RapidAPI-Host': 'contextualwebsearch-websearch-v1.p.rapidapi.com',\n  },\n};\n\nfunction fetchData(query, pageNumber) {\n  return fetch(\n    `https://contextualwebsearch-websearch-v1.p.rapidapi.com/api/search/NewsSearchAPI?q=${query}&pageNumber=${pageNumber}&pageSize=6&autoCorrect=true`,\n    options\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\n// функция создания разметки\nfunction cardMarkup({ title, provider, description, url, image }) {\n  return `<div class=\"article-card\">\n  <img class=\"article-img\" src=\"${image.url}\" alt=\"\" />\n      <h3 class=\"article-title\">${title}</h3>\n      <h5 class=\"article-author\">${provider.name || 'Anonymus'}</h5>\n      <p class=\"article-text\">${description}</p>\n      <a class=\"article-link\" href=\"${url}\">Read more</a>\n  </div>`;\n}\n\n// функция рендера страницы\nfunction renderNewsCard(arrayNews) {\n  const listNewsMarkup = arrayNews.reduce((acc, article) => {\n    return cardMarkup(article) + acc;\n  }, '');\n  newsWrapperRef.insertAdjacentHTML('beforeend', listNewsMarkup);\n}\n"],"names":["$7Y9D8","parcelRequire","$b69389323f82cad8$var$seachFormRef","document","querySelector","$b69389323f82cad8$var$seachMore","$b69389323f82cad8$var$newsWrapperRef","$b69389323f82cad8$var$seachValue","$b69389323f82cad8$var$pageNumber","addEventListener","e","preventDefault","innerHTML","currentTarget","elements","news","value","trim","$b69389323f82cad8$var$fetchData","then","totalCount","length","Error","$b69389323f82cad8$var$renderNewsCard","console","log","catch","error","$parcel$interopDefault","Report","failure","params","$b69389323f82cad8$var$options","method","headers","query","pageNumber1","fetch","response","ok","status","json","arrayNews","listNewsMarkup","reduce","acc","article","title","provider","description","url","image","name","$b69389323f82cad8$var$cardMarkup","insertAdjacentHTML"],"version":3,"file":"09-seach-news.b4f62380.js.map"}