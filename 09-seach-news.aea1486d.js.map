{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,G,aAAeC,SAASC,cAAc,mBACtCC,EAAYF,SAASC,cAAc,eACnCE,EAAiBH,SAASC,cAAc,sBACxCG,EAAQJ,SAASC,cAAc,OAEjCI,EAAa,GACbC,EAAa,EACjBF,EAAMG,MAAMC,QAAU,OAEtBT,EAAaU,iBAAiB,UAMV,SAACC,GACnBA,EAAEC,iBACFR,EAAeS,UAAY,GAC3BP,EAAaK,EAAEG,cAAcC,SAASC,KAAKC,MAAMC,OACjDX,EAAa,EACbY,EAAArB,GAASsB,QAAQC,SAEjBC,EAAUhB,EAAYC,GACnBgB,MAAK,SAAAC,GAAaA,EAAVC,W,IAAYR,EAAKO,EAALP,MACnB,GAAqB,IAAjBA,EAAMS,OACR,MAAM,IAAIC,MAAM,WAElBC,EAAeX,GACfV,GAAc,EACdsB,QAAQC,IAAIvB,GACZJ,EAAU4B,UAAUC,OAAO,kB,IAG5BC,OAAM,SAAAC,GACL9B,EAAeS,UAAY,GAC3BM,EAAArB,GAASqC,OAAOC,QAAQ,eAAgB,qBAAsB,MAC9DP,QAAQK,MAAMA,E,IAEfG,SAAQ,WACPlB,EAAArB,GAASsB,QAAQY,Q,OA7BvB7B,EAAUO,iBAAiB,SAmCJ,SAAE4B,GACvBnB,EAAArB,GAASsB,QAAQC,SACjBC,EAAUhB,EAAYC,GACnBgB,MAAK,SAAAC,GAAaA,EAAVC,W,IAAYR,EAAKO,EAALP,MACnB,GAAqB,IAAjBA,EAAMS,OACR,MAAM,IAAIC,MAAM,WAElBC,EAAeX,GACfV,GAAc,EACdsB,QAAQC,IAAIvB,E,IAEb0B,OAAM,SAAAC,GACL9B,EAAeS,UAAY,GAC3BM,EAAArB,GAASqC,OAAOC,QAAQ,eAAgB,kBAAmB,MAC3DP,QAAQK,MAAMA,E,IACbG,SAAQ,WACTlB,EAAArB,GAASsB,QAAQY,Q,OAlDvBO,OAAO7B,iBAAiB,UAgGX,WACPT,SAASuC,KAAKC,UAAY,IAAMxC,SAASyC,gBAAgBD,UAAY,GACvEpC,EAAMG,MAAMC,QAAU,QAEtBJ,EAAMG,MAAMC,QAAU,M,IAnG1BJ,EAAMK,iBAAiB,SAwGI,WACzBmB,QAAQC,IAAI,SACZ7B,SAASyC,gBAAgBC,SAAS,CAAEC,IAAK,EAAGC,SAAU,U,IAnDhB,IAAlCC,EAAU,CACdC,OAAQ,MACRC,QAAS,CACP,iBAAkB,qDAClB,kBAAmB,oDAIvB,SAAS1B,EAAU2B,EAAOC,GACxB,OAAOC,MACL,sFAA0GC,OAApBH,EAAM,gBAAyBG,OAAXF,EAAW,gCACrHJ,GACAvB,MAAK,SAAA8B,GACL,IAAKA,EAASC,GACZ,MAAM,IAAI3B,MAAM0B,EAASE,QAE3B,OAAOF,EAASG,M,IAgBE,SAAb5B,EAAe6B,GACtB,IAAMC,EAAiBD,EAAUE,QAAO,SAACC,EAAKC,GAC5C,OAbkBC,GAAFtC,EAaEqC,GAbAC,MAAOC,EAATvC,EAASuC,SAAUC,EAAnBxC,EAAmBwC,YAAaC,EAAhCzC,EAAgCyC,IAAKC,EAArC1C,EAAqC0C,MAChD,+DAEyBd,OADAc,EAAMD,IAAI,iDAETb,OADDU,EAAM,4CAERV,OADGW,EAASI,MAAQ,WAAW,yCAEzBf,OADNY,EAAY,8CACFZ,OAAJa,EAAI,6BAOTL,EAbV,IAAHpC,EAAEsC,EAAOC,EAAUC,EAAaC,EAAKC,C,GAcpD,IACH9D,EAAegE,mBAAmB,YAAaV,E","sources":["src/js/09-seach-news.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport Loading from 'notiflix';\nconst seachFormRef = document.querySelector('.js-seach-form');\nconst seachMore = document.querySelector('.seach-more');\nconst newsWrapperRef = document.querySelector('.js-news-container');\nconst btnUp = document.querySelector('.up');\n\nlet seachValue = '';\nlet pageNumber = 1;\nbtnUp.style.display = 'none';\n\nseachFormRef.addEventListener('submit', onSeachNews);\nseachMore.addEventListener('click', onSeachMoreNews);\nwindow.addEventListener('scroll', scrollFunction);\nbtnUp.addEventListener('click', topFunction);\n\n// функция первого поиска\nfunction onSeachNews(e) {\n  e.preventDefault();\n  newsWrapperRef.innerHTML = '';\n  seachValue = e.currentTarget.elements.news.value.trim();\n  pageNumber = 1;\n  Notiflix.Loading.arrows();\n\n  fetchData(seachValue, pageNumber)\n    .then(({ totalCount, value }) => {\n      if (value.length === 0) {\n        throw new Error('No data');\n      }\n      renderNewsCard(value);\n      pageNumber += 1;\n      console.log(pageNumber);\n      seachMore.classList.remove('visually-hidden');\n      // console.log(articles);\n    })\n    .catch(error => {\n      newsWrapperRef.innerHTML = '';\n      Notiflix.Report.failure('Attention!!!', 'Not found anything', 'Ok');\n      console.error(error);\n    })\n    .finally(() => {\n      Notiflix.Loading.remove();\n      // seachFormRef.reset();\n    });\n}\n\n// функция следующего поиска\nfunction onSeachMoreNews(params) {\n  Notiflix.Loading.arrows();\n  fetchData(seachValue, pageNumber)\n    .then(({ totalCount, value }) => {\n      if (value.length === 0) {\n        throw new Error('No data');\n      }\n      renderNewsCard(value);\n      pageNumber += 1;\n      console.log(pageNumber);\n    })\n    .catch(error => {\n      newsWrapperRef.innerHTML = '';\n      Notiflix.Report.failure('Attention!!!', 'Something wrong', 'Ok');\n      console.error(error);\n    }).finally(() => {\n      Notiflix.Loading.remove();\n      // seachFormRef.reset();\n    });\n}\n\n// функция принесла и распарсила промис с данными\nconst options = {\n  method: 'GET',\n  headers: {\n    'X-RapidAPI-Key': '504d5aef12msh28872f0ea14deb5p1f3bbcjsnd108e0bdaaa0',\n    'X-RapidAPI-Host': 'contextualwebsearch-websearch-v1.p.rapidapi.com',\n  },\n};\n\nfunction fetchData(query, pageNumber) {\n  return fetch(\n    `https://contextualwebsearch-websearch-v1.p.rapidapi.com/api/search/NewsSearchAPI?q=${query}&pageNumber=${pageNumber}&pageSize=6&autoCorrect=true`,\n    options\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\n// функция создания разметки\nfunction cardMarkup({ title, provider, description, url, image }) {\n  return `<div class=\"article-card\">\n  <img class=\"article-img\" src=\"${image.url}\" alt=\"\" />\n      <h3 class=\"article-title\">${title}</h3>\n      <h5 class=\"article-author\">${provider.name || 'Anonymus'}</h5>\n      <p class=\"article-text\">${description}</p>\n      <a class=\"article-link\" href=\"${url}\">Read more</a>\n  </div>`;\n}\n\n// функция рендера страницы\nfunction renderNewsCard(arrayNews) {\n  const listNewsMarkup = arrayNews.reduce((acc, article) => {\n    return cardMarkup(article) + acc;\n  }, '');\n  newsWrapperRef.insertAdjacentHTML('beforeend', listNewsMarkup);\n}\n\n// функція скролу\nfunction scrollFunction() {\n  if (document.body.scrollTop > 30 || document.documentElement.scrollTop > 30) {\n    btnUp.style.display = 'block';\n  } else {\n    btnUp.style.display = 'none';\n  }\n}\n\n// повернення на початок сторінки\nfunction topFunction() {\n  console.log('ooooo');\n  document.documentElement.scrollTo({ top: 0, behavior: 'smooth' }); // Для Chrome, Firefox, IE и Opera\n}\n"],"names":["$6JpON","parcelRequire","$838cfc6f779bf4a4$var$seachFormRef","document","querySelector","$838cfc6f779bf4a4$var$seachMore","$838cfc6f779bf4a4$var$newsWrapperRef","$838cfc6f779bf4a4$var$btnUp","$838cfc6f779bf4a4$var$seachValue","$838cfc6f779bf4a4$var$pageNumber","style","display","addEventListener","e","preventDefault","innerHTML","currentTarget","elements","news","value","trim","$parcel$interopDefault","Loading","arrows","$838cfc6f779bf4a4$var$fetchData","then","param","totalCount","length","Error","$838cfc6f779bf4a4$var$renderNewsCard","console","log","classList","remove","catch","error","Report","failure","finally","params","window","body","scrollTop","documentElement","scrollTo","top","behavior","$838cfc6f779bf4a4$var$options","method","headers","query","pageNumber1","fetch","concat","response","ok","status","json","arrayNews","listNewsMarkup","reduce","acc","article","title","provider","description","url","image","name","insertAdjacentHTML"],"version":3,"file":"09-seach-news.aea1486d.js.map"}