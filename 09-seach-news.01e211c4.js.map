{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAAMC,EAAU,CACdC,OAAQ,MACRC,QAAS,CACP,iBAAkB,qDAClB,kBAAmB,oDAYvB,IAAMC,EAAeC,SAASC,cAAc,kBACtCC,EAAiBF,SAASC,cAAc,sBAE9CF,EAAaI,iBAAiB,UAE9B,SAAqBC,GACnBA,EAAEC,kBAdeC,EAgBEP,EAAaQ,SAASC,KAAKC,MAAMC,OAf7CC,MACL,sFAA4FC,OAANN,EAAM,0FAC5FV,GACAiB,MAAK,SAAAC,G,OAAYA,EAASC,M,KAezBF,MAAK,SAAAG,G,IA8BFC,EA9BKR,EAAKO,EAALP,MACP,GAAqB,IAAjBA,EAAMS,OACR,MAAM,IAAIC,MAAM,WA4BhBF,EA1BaR,EA0BcW,QAAO,SAACC,EAAKC,GAC5C,OAbmB,SAAHN,G,IAAEO,EAAFP,EAAEO,KAAMC,EAARR,EAAQQ,SAAUC,EAAlBT,EAAkBS,YAAaC,EAA/BV,EAA+BU,OAAQC,EAAvCX,EAAuCW,MACzD,MAAO,+DAEyBf,OADAe,EAAMC,IAAI,iDAEThB,OADDW,EAAK,4CAEPX,OADGY,EAASD,MAAQ,WAAW,yCAEzBX,OADNa,EAAY,8CACCb,OAAPc,EAAO,4B,CAOlCG,CAAWP,GAAWD,C,GAC5B,IAEHnB,EAAe4B,UAAYb,C,IA3BxBc,OAAM,SAAAC,GACL9B,EAAe4B,UAAY,GAC3BG,EAAAvC,GAASwC,OAAOC,QAAQ,eAAgB,qBAAsB,MAC9DC,QAAQJ,MAAMA,E,IAEfK,SAAQ,WACPtC,EAAauC,O,IAhCnB,IAAmBhC,C","sources":["src/js/09-seach-news.js"],"sourcesContent":["const options = {\n  method: 'GET',\n  headers: {\n    'X-RapidAPI-Key': '504d5aef12msh28872f0ea14deb5p1f3bbcjsnd108e0bdaaa0',\n    'X-RapidAPI-Host': 'contextualwebsearch-websearch-v1.p.rapidapi.com',\n  },\n};\n\nfunction fetchData(query) {\n  return fetch(\n    `https://contextualwebsearch-websearch-v1.p.rapidapi.com/api/search/NewsSearchAPI?q=${query}&pageNumber=1&pageSize=20&autoCorrect=true&fromPublishedDate=null&toPublishedDate=null`,\n    options\n  ).then(response => response.json());\n}\n\nimport Notiflix from 'notiflix';\nconst seachFormRef = document.querySelector('.js-seach-form');\nconst newsWrapperRef = document.querySelector('.js-news-container');\n\nseachFormRef.addEventListener('submit', onSeachNews);\n\nfunction onSeachNews(e) {\n  e.preventDefault();\n\n  const seachValue = seachFormRef.elements.news.value.trim();\n\n  fetchData(seachValue)\n    .then(({ value }) => {\n      if (value.length === 0) {\n        throw new Error('No data');\n      }\n      renderNewsCard(value);\n      // console.log(articles);\n    })\n    .catch(error => {\n      newsWrapperRef.innerHTML = '';\n      Notiflix.Report.failure('Attention!!!', 'Not found anything', 'Ok');\n      console.error(error);\n    })\n    .finally(() => {\n      seachFormRef.reset();\n    });\n}\n\n// функция создания разметки\nfunction cardMarkup({ name, provider, description, ampUrl, image }) {\n  return `<div class=\"article-card\">\n  <img class=\"article-img\" src=\"${image.url}\" alt=\"\" />\n      <h3 class=\"article-title\">${name}</h3>\n      <h4 class=\"article-author\">${provider.name || 'Anonymus'}</h4>\n      <p class=\"article-text\">${description}</p>\n      <a class=\"article-link\" href=\"${ampUrl}\">Read more</a>\n  </div>`;\n}\n\n// функция рендера страницы\nfunction renderNewsCard(arrayNews) {\n  const listNewsMarkup = arrayNews.reduce((acc, article) => {\n    return cardMarkup(article) + acc;\n  }, '');\n\n  newsWrapperRef.innerHTML = listNewsMarkup;\n}\n\n// const YOUR_API_KEY = 'ea323ce12d5643248c09e504b34a1936';\n// import { NewsAPI } from 'newsapi';\n// const NewsAPI = require('newsapi');\n// // const newsapi = new NewsAPI(YOUR_API_KEY);\n// const newsapi = new NewsAPI(YOUR_API_KEY, {\n//   corsProxyUrl: 'https://newsapi.org/',\n// });\n// console.log(newsapi);\n// newsapi.v2\n//   .everything({\n//     q: 'cat',\n//   })\n//   .then(response => {\n//     console.log(response);\n//   });\n\n// функция принесла и распарсила промис с данными\n// const options = {\n//   headers: {\n//     'X-Api-Key': 'ea323ce12d5643248c09e504b34a1936',\n//   },\n// };\n// function fetchData(query) {\n//   const URL = `https://newsapi.org/v2/everything?q=${query}&apiKey=ea323ce12d5643248c09e504b34a1936`;\n//   return fetch(URL).then(response => response.json());\n// }\n"],"names":["$6JpON","parcelRequire","$838cfc6f779bf4a4$var$options","method","headers","$838cfc6f779bf4a4$var$seachFormRef","document","querySelector","$838cfc6f779bf4a4$var$newsWrapperRef","addEventListener","e","preventDefault","query","elements","news","value","trim","fetch","concat","then","response","json","param","listNewsMarkup","length","Error","reduce","acc","article","name","provider","description","ampUrl","image","url","$838cfc6f779bf4a4$var$cardMarkup","innerHTML","catch","error","$parcel$interopDefault","Report","failure","console","finally","reset"],"version":3,"file":"09-seach-news.01e211c4.js.map"}